<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administración | Sistema Académico</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --accent-color: #e74c3c;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --gray-dark: #2c3e50;
            --gray: #7f8c8d;
            --light-gray: #f8f9fa;
            --border-color: #ecf0f1;
            --border-radius: 8px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #34495e;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar */
        .sidebar {
            width: 280px;
            background: linear-gradient(135deg, var(--gray-dark), #1a2530);
            color: white;
            padding: 20px 0;
            height: 100vh;
            position: fixed;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        
        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .sidebar-header h2 {
            font-size: 24px;
            margin-bottom: 5px;
            font-weight: 600;
            background: linear-gradient(to right, #3498db, #2ecc71);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .sidebar-header p {
            color: #bdc3c7;
            font-size: 14px;
        }
        
        .sidebar-nav {
            list-style: none;
            padding: 0 15px;
        }
        
        .sidebar-nav-item {
            margin-bottom: 5px;
            transition: var(--transition);
        }
        
        .sidebar-nav-link {
            display: flex;
            align-items: center;
            padding: 14px 20px;
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            transition: var(--transition);
            border-left: 3px solid transparent;
            border-radius: 6px;
            font-size: 16px;
        }
        
        .sidebar-nav-link:hover, .sidebar-nav-link.active {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border-left-color: var(--primary-color);
            transform: translateX(5px);
        }
        
        .sidebar-nav-link i {
            margin-right: 12px;
            width: 24px;
            text-align: center;
            font-size: 18px;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 30px;
            transition: var(--transition);
        }
        
        .page-header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .page-title {
            font-size: 28px;
            color: var(--gray-dark);
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .page-title i {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        /* Cards */
        .card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            overflow: hidden;
            transition: var(--transition);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        
        .card-header {
            padding: 18px 25px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 18px;
        }
        
        .card-body {
            padding: 25px;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 1px solid var(--border-color);
            flex-wrap: wrap;
        }
        
        .tab-btn {
            padding: 12px 24px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 16px;
            font-weight: 500;
            color: var(--gray);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .tab-btn:hover {
            color: var(--primary-color);
        }
        
        .tab-btn.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Table */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }
        
        .data-table th, .data-table td {
            padding: 15px 18px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        .data-table th {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
        }
        
        .data-table tr:nth-child(even) {
            background-color: #f8fafc;
        }
        
        .data-table tr:hover {
            background-color: rgba(52, 152, 219, 0.05);
        }
        
        /* Forms */
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--gray-dark);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 18px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: var(--transition);
            background-color: #f9fbfd;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.25);
            background-color: white;
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: var(--transition);
            text-decoration: none;
            box-shadow: 0 4px 6px rgba(52, 152, 219, 0.2);
        }
        
        .btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(52, 152, 219, 0.3);
        }
        
        .btn i {
            font-size: 16px;
        }
        
        .btn-success {
            background-color: var(--success-color);
            box-shadow: 0 4px 6px rgba(46, 204, 113, 0.2);
        }
        
        .btn-success:hover {
            background-color: #27ae60;
            box-shadow: 0 6px 10px rgba(46, 204, 113, 0.3);
        }
        
        .btn-warning {
            background-color: var(--warning-color);
            box-shadow: 0 4px 6px rgba(243, 156, 18, 0.2);
        }
        
        .btn-warning:hover {
            background-color: #e67e22;
            box-shadow: 0 6px 10px rgba(243, 156, 18, 0.3);
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            box-shadow: 0 4px 6px rgba(231, 76, 60, 0.2);
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
            box-shadow: 0 6px 10px rgba(231, 76, 60, 0.3);
        }
        
        .btn-sm {
            padding: 8px 16px;
            font-size: 14px;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background-color: white;
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 550px;
            animation: modalFadeIn 0.4s;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        .modal-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 22px;
            font-weight: 600;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: white;
            transition: var(--transition);
        }
        
        .modal-close:hover {
            transform: rotate(90deg);
        }
        
        .modal-body {
            padding: 25px;
        }
        
        .modal-footer {
            padding: 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Utils */
        .text-right {
            text-align: right;
        }
        
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 6px 14px;
            border-radius: 50px;
            font-size: 13px;
            font-weight: 600;
        }
        
        .badge-success {
            background-color: rgba(46, 204, 113, 0.15);
            color: var(--success-color);
        }
        
        .badge-warning {
            background-color: rgba(243, 156, 18, 0.15);
            color: var(--warning-color);
        }
        
        .badge-info {
            background-color: rgba(52, 152, 219, 0.15);
            color: var(--primary-color);
        }
        
        /* Nuevos estilos para profesores múltiples */
        .profesores-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        
        .profesores-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
        }
        
        .profesores-list li:last-child {
            border-bottom: none;
        }
        
        .profesores-list li i {
            margin-right: 10px;
            color: var(--primary-color);
        }
        
        .error-message {
            color: var(--danger-color);
            font-size: 14px;
            margin-top: 8px;
            display: none;
            font-weight: 500;
        }

        /* Nuevos estilos para maestros clickeables y horarios */
        .maestro-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .maestro-item:hover {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            transform: translateY(-3px);
        }

        .maestro-header {
            padding: 18px 25px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }

        .maestro-header:hover {
            background: linear-gradient(135deg, var(--secondary-color), #1f5f8b);
        }

        .maestro-name {
            font-size: 20px;
            font-weight: 700;
            margin: 0;
        }

        .maestro-actions {
            display: flex;
            gap: 10px;
        }

        .maestro-arrow {
            font-size: 20px;
            transition: transform 0.3s ease;
        }

        .maestro-item.expanded .maestro-arrow {
            transform: rotate(180deg);
        }

        .maestro-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
            background: #f8f9fa;
        }

        .maestro-item.expanded .maestro-details {
            max-height: 800px;
        }

        .maestro-content {
            padding: 25px;
        }

        .detail-section {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .detail-section:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .detail-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--gray-dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .detail-title i {
            margin-right: 12px;
            font-size: 22px;
            color: var(--primary-color);
            background: rgba(52, 152, 219, 0.1);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .materias-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .materia-badge {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 12px 18px;
            border-radius: var(--border-radius);
            font-size: 15px;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 4px 6px rgba(52, 152, 219, 0.2);
            transition: var(--transition);
        }

        .materia-badge:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 10px rgba(52, 152, 219, 0.3);
        }

        .horario-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .horario-table th {
            background: var(--primary-color);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: 600;
        }

        .horario-table td {
            padding: 15px;
            text-align: center;
            border: 1px solid var(--border-color);
            background: white;
            font-weight: 500;
        }

        .horario-table tr:nth-child(even) td {
            background: #f8f9fa;
        }

        .maestros-grid {
            display: grid;
            gap: 25px;
        }

        .maestro-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .stat-item {
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            border-left: 4px solid var(--success-color);
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .stat-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: var(--success-color);
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 16px;
            color: var(--gray);
            font-weight: 500;
        }

        /* Nuevo: Dashboard stats */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: var(--transition);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .stat-icon {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
        }
        
        .stat-icon.blue {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }
        
        .stat-icon.green {
            background: linear-gradient(135deg, var(--success-color), #27ae60);
        }
        
        .stat-icon.orange {
            background: linear-gradient(135deg, var(--warning-color), #e67e22);
        }
        
        .stat-icon.red {
            background: linear-gradient(135deg, var(--danger-color), #c0392b);
        }
        
        .stat-text h3 {
            font-size: 28px;
            color: var(--gray-dark);
            margin-bottom: 5px;
        }
        
        .stat-text p {
            color: var(--gray);
            font-weight: 500;
        }
        
        /* Nuevo: Responsive design */
        @media (max-width: 1200px) {
            .sidebar {
                width: 250px;
            }
            
            .main-content {
                margin-left: 250px;
            }
        }
        
        @media (max-width: 991px) {
            .sidebar {
                width: 220px;
            }
            
            .main-content {
                margin-left: 220px;
                padding: 20px;
            }
        }
        
        @media (max-width: 767px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
                max-height: 300px;
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .page-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .dashboard-stats {
                grid-template-columns: 1fr;
            }
            
            .maestro-stats {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 576px) {
            .main-content {
                padding: 15px;
            }
            
            .modal-content {
                width: 95%;
            }
            
            .materias-grid {
                grid-template-columns: 1fr;
            }
            
            .horario-table th, 
            .horario-table td {
                padding: 10px;
                font-size: 14px;
            }
        }

        /* Nuevo: Animación de carga */
        @keyframes pulse {
            0% { opacity: 0.6; transform: scale(0.95); }
            50% { opacity: 1; transform: scale(1); }
            100% { opacity: 0.6; transform: scale(0.95); }
        }
        
        .loading {
            animation: pulse 1.5s infinite;
        }

        /* Nuevo: Notificaciones */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: var(--border-radius);
            color: white;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 3000;
            transform: translateX(120%);
            transition: transform 0.4s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background: linear-gradient(135deg, var(--success-color), #27ae60);
        }
        
        .notification.error {
            background: linear-gradient(135deg, var(--danger-color), #c0392b);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>Panel Administrativo</h2>
                <p>Sistema Académico Integral</p>
            </div>
            <ul class="sidebar-nav">
                <li class="sidebar-nav-item">
                    <a href="#" class="sidebar-nav-link active" data-tab="dashboard">
                        <i class="fas fa-chart-line"></i> Dashboard
                    </a>
                </li>
                <li class="sidebar-nav-item">
                    <a href="#" class="sidebar-nav-link" data-tab="maestros">
                        <i class="fas fa-chalkboard-teacher"></i> Maestros
                    </a>
                </li>
                <li class="sidebar-nav-item">
                    <a href="#" class="sidebar-nav-link" data-tab="materias">
                        <i class="fas fa-book"></i> Materias
                    </a>
                </li>
                <li class="sidebar-nav-item">
                    <a href="index.html" class="sidebar-nav-link">
                        <i class="fas fa-home"></i> Volver al Inicio
                    </a>
                </li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard -->
            <div class="tab-content active" id="dashboard">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-chart-line"></i> Dashboard</h1>
                </div>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <i class="fas fa-chalkboard-teacher"></i>
                        </div>
                        <div class="stat-text">
                            <h3 id="totalMaestrosDash">0</h3>
                            <p>Maestros Registrados</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon green">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="stat-text">
                            <h3 id="totalMateriasDash">0</h3>
                            <p>Materias Activas</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon orange">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-text">
                            <h3>24</h3>
                            <p>Horas de Clase Semanales</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon red">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="stat-text">
                            <h3>16</h3>
                            <p>Semanas en el Semestre</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        Resumen del Sistema
                    </div>
                    <div class="card-body">
                        <p>Bienvenido al panel de administración del Sistema Académico. Desde aquí puedes gestionar todos los aspectos relacionados con maestros, materias y horarios.</p>
                        <p>Utiliza el menú lateral para navegar entre las diferentes secciones:</p>
                        
                        <div class="maestro-stats" style="margin-top: 25px;">
                            <div class="stat-item">
                                <div class="stat-number">
                                    <i class="fas fa-chalkboard-teacher"></i> Maestros
                                </div>
                                <div class="stat-label">Gestión completa de profesores, incluyendo horarios y materias asignadas</div>
                            </div>
                            
                            <div class="stat-item">
                                <div class="stat-number">
                                    <i class="fas fa-book"></i> Materias
                                </div>
                                <div class="stat-label">Administración de asignaturas y asignación de profesores</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Maestros -->
            <div class="tab-content" id="maestros">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-chalkboard-teacher"></i> Maestros</h1>
                    <button class="btn btn-success" onclick="openModal('modalAgregarMaestro')">
                        <i class="fas fa-plus"></i> Agregar Maestro
                    </button>
                </div>
                
                <div class="maestro-stats">
                    <div class="stat-item">
                        <div class="stat-number" id="totalMaestros">0</div>
                        <div class="stat-label">Total Maestros</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalMaterias">0</div>
                        <div class="stat-label">Materias Activas</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">24</div>
                        <div class="stat-label">Horas Semanales</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">5</div>
                        <div class="stat-label">Días Laborables</div>
                    </div>
                </div>

                <div class="maestros-grid" id="maestrosContainer">
                    <!-- Los maestros se cargarán aquí -->
                </div>
            </div>

            <!-- Materias -->
            <div class="tab-content" id="materias">
                <div class="page-header">
                    <h1 class="page-title"><i class="fas fa-book"></i> Materias</h1>
                    <button class="btn btn-success" onclick="openModal('modalAgregarMateria')">
                        <i class="fas fa-plus"></i> Agregar Materia
                    </button>
                </div>
                <div class="card">
                    <div class="card-body">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nombre</th>
                                    <th>Profesores asignados</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="tablaMaterias">
                                <!-- Las filas se llenarán aquí -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal Agregar Maestro -->
    <div class="modal" id="modalAgregarMaestro">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Agregar Nuevo Maestro</h3>
                <button class="modal-close" onclick="closeModal('modalAgregarMaestro')">×</button>
            </div>
            <form id="formMaestro" onsubmit="agregarMaestro(event)">
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label">Nombre completo</label>
                        <input type="text" class="form-control" id="nombreMaestro" required placeholder="Ej: Edgar Omar Perez Contreras">
                        <div id="errorMaestro" class="error-message">Este maestro ya existe en el sistema.</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Materia que imparte</label>
                        <input type="text" class="form-control" id="especialidadMaestro" required placeholder="Ej: Optativa 1: Redes Neuronales y Lógica Difusa">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Correo electrónico</label>
                        <input type="email" class="form-control" id="emailMaestro" placeholder="Edgar_Omar@gmail.com">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Teléfono de contacto</label>
                        <input type="tel" class="form-control" id="telefonoMaestro" placeholder="(000) 000-0000">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" onclick="closeModal('modalAgregarMaestro')">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-save"></i> Guardar Maestro
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Agregar Materia -->
    <div class="modal" id="modalAgregarMateria">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Agregar Nueva Materia</h3>
                <button class="modal-close" onclick="closeModal('modalAgregarMateria')">×</button>
            </div>
            <form id="formMateria" onsubmit="agregarMateria(event)">
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label">Nombre de la materia</label>
                        <input type="text" class="form-control" id="nombreMateria" required placeholder="Ej: Álgebra Lineal">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Profesor(es) asignado(s)</label>
                        <select class="form-control" id="profesorMateria" multiple>
                            <!-- Opciones se llenarán con JavaScript -->
                        </select>
                        <small>Mantén presionada la tecla Ctrl (Windows) o Comando (Mac) para seleccionar múltiples profesores.</small>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Créditos</label>
                        <input type="number" class="form-control" id="creditosMateria" min="1" max="10" value="4">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Horas semanales</label>
                        <input type="number" class="form-control" id="horasMateria" min="1" max="20" value="4">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" onclick="closeModal('modalAgregarMateria')">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-save"></i> Guardar Materia
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div id="modalEditarMaestro" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('modalEditarMaestro')">&times;</span>
        <h2>Editar Maestro</h2>
        <form id="formEditarMaestro" onsubmit="guardarEdicionMaestro(event)">
            <input type="hidden" id="editIdMaestro">
            <label>Nombre:</label>
            <input type="text" id="editNombreMaestro" required>
            <label>Email:</label>
            <input type="email" id="editEmailMaestro">
            <label>Teléfono:</label>
            <input type="text" id="editTelefonoMaestro">
            <button type="submit" class="btn btn-primary">Guardar Cambios</button>
        </form>
        <label>Horario:</label>
        <input type="text" id="editHorarioMaestro" placeholder="Ej. Lunes 10:00-12:00">

        <label>Materias Asignadas:</label>
        <div id="editMateriasCheckboxes" class="checkbox-list"></div>
    
        <form id="formEditarMaestro" onsubmit="guardarEdicionMaestro(event)">
    <input type="hidden" id="editIdMaestro">
    
    <label>Nombre:</label>
    <input type="text" id="editNombreMaestro" required>

    <label>Email:</label>
    <input type="email" id="editEmailMaestro">

    <label>Teléfono:</label>
    <input type="text" id="editTelefonoMaestro">

    <label>Horario:</label>
    <input type="text" id="editHorarioMaestro" placeholder="Ej. Lunes 10:00-12:00">

    <label>Materias Asignadas:</label>
    <div id="editMateriasCheckboxes" class="checkbox-list"></div>

    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
</form>

    </div>
</div>


    <!-- Notifications -->
    <div class="notification" id="notification">
        Operación realizada con éxito!
    </div>

    <script>
        // Estructura de datos mejorada con horarios
        const maestros = [
            { 
                id: 1, 
                nombre: "Edgar Omar Perez Contreras", 
                materias: ["Optativa 1: Redes Neuronales y Lógica Difusa, Web 1 con Laboratorio"],
                horario: {
                    "Lunes": "05:00-06:00 PM",
                    "Martes": "06:00-07:00 PM", 
                    "Miércoles":"07:00-08:00 PM",
                    "Jueves": "08:00-09:00 PM",
                    "Viernes": "09:00-10:00 PM"
                },
                email: "Edgar Omar Perez Contreras",
                telefono: "(555) 123-4567"
            },
            { 
                id: 2, 
                nombre: "José Miguel Mendivil Torres", 
                materias: ["Innovación de Procesos con NTIC, Sistemas De Información"],
                horario: {
                    "Lunes": "05:00-06:00 PM",
                    "Martes": "06:00-07:00 PM", 
                    "Miércoles":"07:00-08:00 PM",
                    "Jueves": "08:00-09:00 PM",
                    "Viernes": "09:00-10:00 PM"
                },
                email: "JoseMiguel@gmail.com",
                telefono: "(555) 987-6543"
            },
            { 
                id: 3, 
                nombre: "Herman Geovany Inzunza Martínez", 
                materias: ["Graficación Con Laboratorio, Web 2 con Laboratorio"],
                horario: {
                    "Lunes": "05:00-06:00 PM",
                    "Martes": "06:00-07:00 PM", 
                    "Miércoles":"07:00-08:00 PM",
                    "Jueves": "08:00-09:00 PM",
                    "Viernes": "09:00-10:00 PM"
                },
                email: "HermanGeo@gmail.com",
                telefono: "(555) 456-7890"
            },
            { 
                id: 4, 
                nombre: "Mirsa Paolo Inzunza Martinez", 
                materias: ["Computación Ubicua Con Laboratorio, Sistemas Operativos"],
                horario: {
                    "Lunes": "05:00-06:00 PM",
                    "Martes": "06:00-07:00 PM", 
                    "Miércoles":"07:00-08:00 PM",
                    "Jueves": "08:00-09:00 PM",
                    "Viernes": "09:00-10:00 PM"
                },
                email: "MirPao@gmail.com",
                telefono: "(555) 456-7890"
            },
            { 
                id: 5, 
                nombre: "Rocio Jaqueline Becerra Urquidez", 
                materias: ["Sistemas Distribuidos Con Laboratorio, Algoritmos y Lógica Computacional"],  
                horario: {
                    "Lunes": "05:00-06:00 PM",
                    "Martes": "06:00-07:00 PM", 
                    "Miércoles":"07:00-08:00 PM",
                    "Jueves": "08:00-09:00 PM",
                    "Viernes": "09:00-10:00 PM"
                },
                email: "RocioJaq@gmail.com",
                telefono: "(555) 456-7890"
            },
        ];

        const materias = [
            { id: 1, nombre: "Optativa 1: Redes Neuronales y Lógica Difusa", profesores: ["Edgar Omar Perez Contreras"], creditos: 4, horas: 5 },
            { id: 2, nombre: "Innovación de Procesos con NTIC", profesores: ["José Miguel Mendivil Torres"], creditos: 3, horas: 4 },
            { id: 3, nombre: "Graficación Con Laboratorio", profesores: ["Herman Geovany Inzunza Martínez"], creditos: 5, horas: 6 },
            { id: 4, nombre: "Computación Ubicua Con Laboratorio", profesores: ["Mirsa Paolo Inzunza Martinez"], creditos: 5, horas: 6 },
            { id: 5, nombre: "Sistemas Distribuidos Con Laboratorio", profesores: ["Rocio Jaqueline Becerra Urquidez"], creditos: 5, horas: 6 },
        ];

        // Función para mostrar notificación
        function showNotification(message, isSuccess = true) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${isSuccess ? 'success' : 'error'}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Función para verificar si un maestro ya existe
        function maestroExiste(nombre) {
            return maestros.some(maestro => maestro.nombre.toLowerCase() === nombre.toLowerCase());
        }

        // Función para generar horario automático para nuevos maestros
        function generarHorarioAleatorio() {
            const dias = ["Lunes", "Martes", "Miércoles", "Jueves", "Viernes"];
            const horarios = ["8:00-10:00 AM", "10:00-12:00 PM", "2:00-4:00 PM", "4:00-6:00 PM"];
            const horario = {};
            
            dias.forEach(dia => {
                horario[dia] = horarios[Math.floor(Math.random() * horarios.length)];
            });
            
            return horario;
        }

        // Cargar maestros en el nuevo formato
        function cargarMaestros() {
            const container = document.getElementById("maestrosContainer");
            container.innerHTML = "";
            
            // Actualizar estadísticas
            document.getElementById("totalMaestros").textContent = maestros.length;
            document.getElementById("totalMaterias").textContent = materias.length;
            document.getElementById("totalMaestrosDash").textContent = maestros.length;
            document.getElementById("totalMateriasDash").textContent = materias.length;
            
            maestros.forEach(maestro => {
                const maestroElement = document.createElement("div");
                maestroElement.className = "maestro-item";
                maestroElement.innerHTML = `
                    <div class="maestro-header" onclick="toggleMaestro(${maestro.id})">
                        <h3 class="maestro-name">${maestro.nombre}</h3>
                        <div class="maestro-actions">
                            <button class="btn btn-warning btn-sm" onclick="editarMaestro(${maestro.id}, event)">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="eliminarMaestro(${maestro.id}, event)">
                                <i class="fas fa-trash"></i>
                            </button>
                            <span class="maestro-arrow"><i class="fas fa-chevron-down"></i></span>
                        </div>
                    </div>
                    <div class="maestro-details">
                        <div class="maestro-content">
                            <div class="detail-section">
                                <div class="detail-title">
                                    <i class="fas fa-info-circle"></i> Información del Maestro
                                </div>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                    <div>
                                        <p><strong>Email:</strong> ${maestro.email || 'No especificado'}</p>
                                        <p><strong>Teléfono:</strong> ${maestro.telefono || 'No especificado'}</p>
                                    </div>
                                    <div>
                                        <p><strong>Total de Materias:</strong> ${maestro.materias.length}</p>
                                        <p><strong>Horas Semanales:</strong> ${Object.values(maestro.horario).length * 2}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="detail-section">
                                <div class="detail-title">
                                    <i class="fas fa-book"></i> Materias que imparte
                                </div>
                                <div class="materias-grid">
                                    ${maestro.materias.map(materia => 
                                        `<div class="materia-badge">${materia}</div>`
                                    ).join("")}
                                </div>
                            </div>
                            <div class="detail-section">
                                <div class="detail-title">
                                    <i class="fas fa-clock"></i> Horario de clases
                                </div>
                                <table class="horario-table">
                                    <thead>
                                        <tr>
                                            <th>Día</th>
                                            <th>Horario</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${Object.entries(maestro.horario).map(([dia, hora]) => 
                                            `<tr><td><strong>${dia}</strong></td><td>${hora}</td></tr>`
                                        ).join("")}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(maestroElement);
            });
        }

        // Función para expandir/contraer detalles del maestro
        function toggleMaestro(maestroId) {
            const maestroItems = document.querySelectorAll('.maestro-item');
            maestroItems.forEach(item => {
                const header = item.querySelector('.maestro-header');
                const isCurrentItem = header.getAttribute('onclick').includes(maestroId.toString());
                
                if (isCurrentItem) {
                    item.classList.toggle('expanded');
                } else {
                    item.classList.remove('expanded');
                }
            });
        }

        // Función para eliminar un maestro
        function eliminarMaestro(maestroId, event) {
            event.stopPropagation();
            if (confirm("¿Estás seguro de que deseas eliminar este maestro?")) {
                const index = maestros.findIndex(m => m.id === maestroId);
                if (index !== -1) {
                    const maestroEliminado = maestros.splice(index, 1)[0];
                    
                    // Actualizar materias que tenían a este maestro asignado
                    materias.forEach(materia => {
                        const profesorIndex = materia.profesores.indexOf(maestroEliminado.nombre);
                        if (profesorIndex !== -1) {
                            materia.profesores.splice(profesorIndex, 1);
                        }
                    });
                    
                    cargarMaestros();
                    cargarMaterias();
                    cargarOpcionesProfesores();
                    showNotification("Maestro eliminado correctamente");
                }
            }
        }

        // Función para editar un maestro
function editarMaestro(maestroId, event) {
    event.stopPropagation();
    const maestro = maestros.find(m => m.id === maestroId);
    if (maestro) {
        // Llenar el modal de edición con los datos del maestro
        document.getElementById('editNombreMaestro').value = maestro.nombre;
        document.getElementById('editEspecialidadMaestro').value = maestro.materias.join(', ');
        document.getElementById('editEmailMaestro').value = maestro.email || '';
        document.getElementById('editTelefonoMaestro').value = maestro.telefono || '';
        
        // Guardar el ID del maestro que se está editando (para usarlo al guardar)
        document.getElementById('editMaestroForm').dataset.maestroId = maestroId;
        
        // Abrir el modal
        openModal('modalEditarMaestro');
    }
}

// Función para guardar los cambios (se llamaría al enviar el formulario)
function guardarEdicionMaestro(event) {
    event.preventDefault();
    const maestroId = parseInt(document.getElementById('editMaestroForm').dataset.maestroId);
    const maestro = maestros.find(m => m.id === maestroId);
    
    if (maestro) {
        // Actualizar datos del maestro
        maestro.nombre = document.getElementById('editNombreMaestro').value.trim();
        maestro.materias = document.getElementById('editEspecialidadMaestro').value.trim().split(',');
        maestro.email = document.getElementById('editEmailMaestro').value.trim() || null;
        maestro.telefono = document.getElementById('editTelefonoMaestro').value.trim() || null;
        
        // Actualizar la vista y cerrar el modal
        cargarMaestros();
        closeModal('modalEditarMaestro');
        showNotification("Maestro actualizado correctamente");
    }
}

        // Cargar materias en la tabla
        function cargarMaterias() {
            let tbody = document.getElementById("tablaMaterias");
            tbody.innerHTML = "";
            materias.forEach(materia => {
                let fila = `
                    <tr>
                        <td>${materia.id}</td>
                        <td><strong>${materia.nombre}</strong></td>
                        <td>
                            <ul class="profesores-list">
                                ${materia.profesores.map(profesor => `<li><i class="fas fa-user-tie"></i> ${profesor}</li>`).join("")}
                            </ul>
                        </td>
                        <td>
                            <button class="btn btn-warning btn-sm">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="eliminarMateria(${materia.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `;
                tbody.innerHTML += fila;
            });
        }

        // Función para eliminar una materia
        function eliminarMateria(materiaId) {
            if (confirm("¿Estás seguro de que deseas eliminar esta materia?")) {
                const index = materias.findIndex(m => m.id === materiaId);
                if (index !== -1) {
                    const materiaEliminada = materias.splice(index, 1)[0];
                    
                    // Actualizar maestros que tenían esta materia asignada
                    maestros.forEach(maestro => {
                        const materiaIndex = maestro.materias.indexOf(materiaEliminada.nombre);
                        if (materiaIndex !== -1) {
                            maestro.materias.splice(materiaIndex, 1);
                        }
                    });
                    
                    cargarMaterias();
                    cargarMaestros();
                    showNotification("Materia eliminada correctamente");
                }
            }
        }

        // Cargar opciones de profesores en el select
        function cargarOpcionesProfesores() {
            let select = document.getElementById("profesorMateria");
            select.innerHTML = "";
            maestros.forEach(maestro => {
                let option = document.createElement("option");
                option.value = maestro.nombre;
                option.textContent = maestro.nombre;
                select.appendChild(option);
            });
        }

        // Agregar un nuevo maestro
        function agregarMaestro(event) {
            event.preventDefault();
            
            let nombre = document.getElementById("nombreMaestro").value.trim();
            let materia = document.getElementById("especialidadMaestro").value.trim();
            let email = document.getElementById("emailMaestro").value.trim();
            let telefono = document.getElementById("telefonoMaestro").value.trim();
            let errorElement = document.getElementById("errorMaestro");
            
            // Validar si el maestro ya existe
            if (maestroExiste(nombre)) {
                errorElement.style.display = "block";
                return;
            } else {
                errorElement.style.display = "none";
            }

            // Validar si la materia ya está asignada a este maestro (aunque sea nuevo)
    if (materiaYaAsignada(nombre, materia)) {
        errorElement.textContent = "¡Este maestro ya tiene asignada esta materia!";
        errorElement.style.display = "block";
        alert("Error: La materia " + materia + " ya está asignada a este maestro.");
        return;
    }
            
            // Crear nuevo maestro con horario automático
            let nuevoMaestro = {
                id: maestros.length > 0 ? Math.max(...maestros.map(m => m.id)) + 1 : 1,
                nombre: nombre,
                materias: [materia],
                horario: generarHorarioAleatorio(),
                email: email || null,
                telefono: telefono || null
            };
            
            maestros.push(nuevoMaestro);
            
            // Verificar si la materia ya existe
            let materiaExistente = materias.find(m => m.nombre === materia);
            if (materiaExistente) {
                // Si la materia existe, agregar el profesor si no está ya asignado
                if (!materiaExistente.profesores.includes(nombre)) {
                    materiaExistente.profesores.push(nombre);
                }
            } else {
                // Si la materia no existe, crearla
                materias.push({
                    id: materias.length > 0 ? Math.max(...materias.map(m => m.id)) + 1 : 1,
                    nombre: materia,
                    profesores: [nombre],
                    creditos: 4,
                    horas: 4
                });
            }
            
            // Actualizar las tablas
            cargarMaestros();
            cargarMaterias();
            cargarOpcionesProfesores();
            
            // Cerrar modal y limpiar formulario
            closeModal("modalAgregarMaestro");
            document.getElementById("formMaestro").reset();
            showNotification("Maestro agregado correctamente");
        }

        // Agregar una nueva materia
        function agregarMateria(event) {
            event.preventDefault();
            
            let nombre = document.getElementById("nombreMateria").value.trim();
            let select = document.getElementById("profesorMateria");
            let profesoresSeleccionados = Array.from(select.selectedOptions).map(option => option.value);
            let creditos = parseInt(document.getElementById("creditosMateria").value) || 4;
            let horas = parseInt(document.getElementById("horasMateria").value) || 4;
            
            // Verificar si la materia ya existe
            let materiaExistente = materias.find(m => m.nombre === nombre);
            
            if (materiaExistente) {
                // Si la materia existe, agregar los nuevos profesores (sin duplicados)
                profesoresSeleccionados.forEach(profesor => {
                    if (!materiaExistente.profesores.includes(profesor)) {
                        materiaExistente.profesores.push(profesor);
                    }
                });
            } else {
                // Si la materia no existe, crearla
                materias.push({
                    id: materias.length > 0 ? Math.max(...materias.map(m => m.id)) + 1 : 1,
                    nombre: nombre,
                    profesores: profesoresSeleccionados,
                    creditos: creditos,
                    horas: horas
                });
            }
            
            // Actualizar las materias de los maestros
            profesoresSeleccionados.forEach(nombreProfesor => {
                let maestro = maestros.find(m => m.nombre === nombreProfesor);
                if (maestro && !maestro.materias.includes(nombre)) {
                    maestro.materias.push(nombre);
                }
            });
            
            // Actualizar las tablas
            cargarMaterias();
            cargarMaestros();
            
            // Cerrar modal y limpiar formulario
            closeModal("modalAgregarMateria");
            document.getElementById("formMateria").reset();
            showNotification("Materia agregada correctamente");
        }

        // Cambiar entre pestañas
        document.querySelectorAll(".sidebar-nav-link").forEach(link => {
            link.addEventListener("click", function (e) {
                e.preventDefault();

                // Evitar procesar si es un enlace externo
                if (this.getAttribute("href") === "index.html") {
                    return true;
                }

                // Remover la clase "active" de todos los enlaces
                document.querySelectorAll(".sidebar-nav-link").forEach(item => item.classList.remove("active"));
                // Agregar la clase "active" al enlace clickeado
                this.classList.add("active");

                // Ocultar todos los contenidos de las pestañas
                document.querySelectorAll(".tab-content").forEach(content => {
                    content.classList.remove("active");
                });

                // Mostrar el contenido de la pestaña seleccionada
                let tab = this.getAttribute("data-tab");
                if (tab && document.getElementById(tab)) {
                    document.getElementById(tab).classList.add("active");

                    // Cargar datos si es necesario
                    if (tab === "maestros") {
                        cargarMaestros();
                    } else if (tab === "materias") {
                        cargarMaterias();
                    }
                }
            });
        });

        // Abrir modal
        function openModal(modalId) {
            document.getElementById(modalId).style.display = "flex";
            
            // Si es el modal de materias, cargar las opciones de profesores
            if (modalId === "modalAgregarMateria") {
                cargarOpcionesProfesores();
            }
        }

        // Cerrar modal
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = "none";
            // Ocultar mensaje de error al cerrar el modal
            if (modalId === "modalAgregarMaestro") {
                document.getElementById("errorMaestro").style.display = "none";
            }
        }

        function materiaYaAsignada(maestroNombre, materiaNombre) {
    const maestro = maestros.find(m => m.nombre.toLowerCase() === maestroNombre.toLowerCase());
    return maestro ? maestro.materias.some(m => m.toLowerCase() === materiaNombre.toLowerCase()) : false;
}

// Función para verificar si un maestro ya está asignado a una materia
function maestroYaAsignado(materiaNombre, maestroNombre) {
    const materia = materias.find(m => m.nombre.toLowerCase() === materiaNombre.toLowerCase());
    return materia ? materia.profesores.some(p => p.toLowerCase() === maestroNombre.toLowerCase()) : false;
}

        // Cargar datos al iniciar la página
        document.addEventListener("DOMContentLoaded", () => {
            cargarMaestros();
            cargarMaterias();
            cargarOpcionesProfesores();
        });
    </script>
</body>
</html>
